model:
  type: "conditional_vae"
  params:
    encoder_name: "resnet18"
    latent_dim: 256
    threshold_km: 1000.0
    learning_rate: 0.0001
    beta: 1.0
    img_size: 224
    img_channels: 3
    pretrained: true
    freeze_encoder: false

data: 
  train: 
    dataset_name: "mp16"
    pred_model_name: "geoclip"
    num_workers: 0
    batch_size: 32  # Match classifier batch size
  test: 
    - dataset_name: "yfcc4k"
      pred_model_name: "geoclip"
      num_workers: 0
      batch_size: 32  # Match classifier batch size
    - dataset_name: "im2gps3k"
      pred_model_name: "geoclip"
      num_workers: 0
      batch_size: 32  # Match classifier batch size

trainer:
  max_steps: 500  # Maximum number of training steps (-1 for no limit)
  max_epochs: -1  # Use -1 to disable epoch-based training when using steps
  precision: 'bf16-mixed'
  accelerator: 'auto'
  devices: 'auto'
  strategy: 'auto'
  log_every_n_steps: 1
  enable_progress_bar: true
  val_check_interval: 500  # Run validation every N training steps
  limit_val_batches: 250


checkpoint: true
logger: true
