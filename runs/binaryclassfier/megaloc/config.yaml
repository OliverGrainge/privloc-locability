model:
  type: "binary_classifier"
  arch_name: "megaloc"
  threshold_km: 1000.0  # Distance threshold for binary classification
  learning_rate: 0.0001  # Match classifier learning rate
  use_weighted_loss: false  # Enable class imbalance handling

data: 
  train: 
    dataset_name: "mp16"
    pred_model_name: "geoclip"
    num_workers: 2
    batch_size: 64  # Match classifier batch size
  test: 
    - dataset_name: "yfcc4k"
      pred_model_name: "geoclip"
      num_workers: 2
      batch_size: 64  # Match classifier batch size
    - dataset_name: "im2gps3k"
      pred_model_name: "geoclip"
      num_workers: 2
      batch_size: 64  # Match classifier batch size
    - dataset_name: "mp16" 
      pred_model_name: "geoclip"
      num_workers: 2
      batch_size: 64  # Match classifier batch size

trainer:
  max_steps: 100000  # Maximum number of training steps (-1 for no limit)
  max_epochs: -1  # Use -1 to disable epoch-based training when using steps
  precision: 'bf16-mixed'
  accelerator: 'auto'
  devices: 'auto'
  strategy: 'auto'
  log_every_n_steps: 1
  enable_progress_bar: true
  limit_val_batches: 250
  val_check_interval: 10000
  #val_check_interval: 500  # Run validation every N training steps
  #limit_val_batches: 250


checkpoint: true
logger: true
